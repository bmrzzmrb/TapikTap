<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TapikTap</title>

    <!-- ‚úÖ –û–§–ò–¶–ò–ê–õ–¨–ù–´–ô TELEGRAM WEBAPP SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        body {
            margin: 0;
            background: #1a1a2e;
            color: white;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            touch-action: none;
            user-select: none;
        }

        #coin {
            width: 180px;
            height: 180px;
            background: #f1c40f;
            border-radius: 50%;
            border: 8px solid #d35400;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            cursor: pointer;
            transition: transform 0.08s;
            box-shadow: 0 0 20px rgba(241, 196, 15, 0.5);
        }

        #coin:active {
            transform: scale(0.9);
        }

        .stats {
            margin-bottom: 20px;
            font-size: 22px;
            text-align: center;
        }

        button {
            padding: 12px 24px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 18px;
        }
    </style>
</head>

<body>

<div class="stats">
    <div>–ë–∞–ª–∞–Ω—Å: <span id="balance">0</span></div>
    <div>–≠–Ω–µ—Ä–≥–∏—è: <span id="energy">1000</span></div>
</div>

<div id="coin">ü™ô</div>

<button onclick="upgrade()">–ê–ø–≥—Ä–µ–π–¥ (–¶–µ–Ω–∞: <span id="cost">10</span>)</button>

<script>
    // ‚úÖ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TELEGRAM
    let tg = null;
    if (window.Telegram && window.Telegram.WebApp) {
        tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
    }

    let balance = 0;
    let energy = 1000;
    let power = 1;
    let cost = 10;

    const balanceEl = document.getElementById('balance');
    const energyEl = document.getElementById('energy');
    const costEl = document.getElementById('cost');
    const coin = document.getElementById('coin');

    coin.addEventListener('pointerdown', () => {
        if (energy <= 0) return;

        balance += power;
        energy--;

        if (tg && tg.HapticFeedback) {
            tg.HapticFeedback.impactOccurred('medium');
        }

        updateUI();
    });

    function upgrade() {
        if (balance >= cost) {
            balance -= cost;
            power++;
            cost += 10;
            updateUI();
        }
    }

    function updateUI() {
        balanceEl.innerText = balance;
        energyEl.innerText = energy;
        costEl.innerText = cost;
    }

    // üîã –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –≤ 00:00 –ú–°–ö
    setInterval(() => {
        const now = new Date();
        const msk = new Date(now.toLocaleString("ru-RU", { timeZone: "Europe/Moscow" }));
        if (msk.getHours() === 0 && msk.getMinutes() === 0) {
            energy = 1000;
            updateUI();
        }
    }, 60000);
</script>

</body>
</html>
