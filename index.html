<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tap Coin 2026</title>
    <script src="https://telegram.org"></script>
    <style>
        body {
            background: radial-gradient(circle, #1e3c72, #2a5298);
            color: white; font-family: 'Arial', sans-serif;
            display: flex; flex-direction: column; align-items: center;
            height: 100vh; margin: 0; overflow: hidden; user-select: none;
        }
        .header { margin-top: 30px; font-size: 32px; font-weight: bold; }
        #coin {
            width: 220px; height: 220px; border-radius: 50%;
            background: linear-gradient(#f1c40f, #f39c12);
            border: 8px solid #d35400; margin: 50px 0;
            box-shadow: 0 0 30px rgba(241, 196, 15, 0.6);
            cursor: pointer; transition: transform 0.05s;
            display: flex; align-items: center; justify-content: center; font-size: 80px;
        }
        #coin:active { transform: scale(0.92); }
        .stats { display: flex; gap: 20px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 15px; }
        .bonus-group { margin-top: 20px; display: flex; gap: 10px; }
        button {
            padding: 10px; border: none; border-radius: 8px; font-weight: bold;
            background: #27ae60; color: white; cursor: pointer;
        }
        .upgrade-btn { background: #e67e22; width: 80%; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="header" id="balance">0</div>
    <div id="coin">ü™ô</div>

    <div class="stats">
        <div>‚ö° –≠–Ω–µ—Ä–≥–∏—è: <span id="energy">1000</span></div>
        <div>üí™ –°–∏–ª–∞: <span id="tap-power">1</span></div>
    </div>

    <div class="bonus-group">
        <button onclick="useBonus('x2')">x2 –°–∏–ª–∞ (1—á)</button>
        <button onclick="useBonus('shield')">–©–∏—Ç (1—á)</button>
    </div>

    <button class="upgrade-btn" onclick="upgrade()">–£–ª—É—á—à–∏—Ç—å –∫–ª–∏–∫ (–¶–µ–Ω–∞: <span id="upg-cost">10</span>)</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let balance = 0;
        let energy = 1000;
        let tapPower = 1;
        let upgradeCost = 10;
        let isX2 = false;
        let isShield = false;

        // –õ–æ–≥–∏–∫–∞ –∫–ª–∏–∫–∞
        document.getElementById('coin').addEventListener('pointerdown', (e) => {
            if (energy <= 0) return;

            // –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å "–ú—è—á –≤ –ª–∏—Ü–æ" (5%)
            if (!isShield && Math.random() < 0.05) {
                balance = Math.max(0, balance - 50);
                tg.HapticFeedback.notificationOccurred('error');
            } else {
                let gain = isX2 ? tapPower * 2 : tapPower;
                balance += gain;
                energy -= 1;
                tg.HapticFeedback.impactOccurred('medium');
            }
            updateUI();
        });

        // –ê–ø–≥—Ä–µ–π–¥ (–ø–æ –¢–ó: –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞ 10 –º–æ–Ω–µ—Ç –¥–æ—Ä–æ–∂–µ)
        function upgrade() {
            if (balance >= upgradeCost && tapPower < 10000) {
                balance -= upgradeCost;
                tapPower += 1;
                upgradeCost += 10; 
                updateUI();
            }
        }

        // –ë–æ–Ω—É—Å—ã
        function useBonus(type) {
            if (type === 'x2') {
                isX2 = true;
                setTimeout(() => { isX2 = false; }, 3600000);
            } else {
                isShield = true;
                setTimeout(() => { isShield = false; }, 3600000);
            }
            alert("–ë–æ–Ω—É—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!");
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        function updateUI() {
            document.getElementById('balance').innerText = Math.floor(balance);
            document.getElementById('energy').innerText = energy;
            document.getElementById('tap-power').innerText = isX2 ? tapPower + " (x2)" : tapPower;
            document.getElementById('upg-cost').innerText = upgradeCost;
        }

        // –°–±—Ä–æ—Å —ç–Ω–µ—Ä–≥–∏–∏ –≤ 00:00 –ø–æ –ú–°–ö
        function resetEnergyAtMidnight() {
            const now = new Date();
            const mskTime = new Date(now.toLocaleString("en-US", {timeZone: "Europe/Moscow"}));
            if (mskTime.getHours() === 0 && mskTime.getMinutes() === 0) {
                energy = 1000;
                updateUI();
            }
        }
        setInterval(resetEnergyAtMidnight, 60000);
    </script>
</body>
</html>
